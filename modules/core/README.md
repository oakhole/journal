Based on refactoring and decorate .